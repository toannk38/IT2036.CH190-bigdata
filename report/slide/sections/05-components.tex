% Components section
\section{Các thành phần hệ thống}

\begin{frame}{Data Collection Layer}
    \begin{block}{Price Collector (5-minute interval)}
        \begin{itemize}
            \item Thu thập dữ liệu giá từ vnstock API (30 mã VN30)
            \item Schedule: */5 * * * * (mỗi 5 phút)
            \item Dữ liệu: Open, High, Low, Close, Volume, Timestamp
            \item Kafka topic: \texttt{stock\_prices\_raw} → MongoDB: \texttt{price\_history}
        \end{itemize}
    \end{block}
    
    \begin{block}{News Collector (30-minute interval)}
        \begin{itemize}
            \item Thu thập tin tức từ vnstock news API
            \item Schedule: */30 * * * * (mỗi 30 phút)
            \item Dữ liệu: title, content, source, published\_at
            \item Kafka topic: \texttt{stock\_news\_raw} → MongoDB: \texttt{news}
        \end{itemize}
    \end{block}
    
    \vspace{0.5em}
    \begin{center}
        \textit{[Placeholder for Data Collection Flow Diagram]}
    \end{center}
\end{frame}

\begin{frame}{Message Streaming với Kafka}
    \begin{center}
        \textbf{[Placeholder for Kafka Flow Diagram]}
        \vspace{1em}
    \end{center}
    
    \begin{columns}
        \begin{column}{0.5\textwidth}
            \textbf{Kafka Topics:}
            \begin{itemize}
                \item \texttt{stock\_prices\_raw}
                \item \texttt{stock\_news\_raw}
            \end{itemize}
            
            \textbf{Producers:}
            \begin{itemize}
                \item Price Collector
                \item News Collector
            \end{itemize}
        \end{column}
        \begin{column}{0.5\textwidth}
            \textbf{Consumers:}
            \begin{itemize}
                \item KafkaDataConsumer service
                \item Consumer group: stock-ai-consumer-group
                \item Auto-commit: disabled (manual commit)
                \item Collections: price\_history, news
            \end{itemize}
            
            \textbf{Benefits:}
            \begin{itemize}
                \item Decoupling
                \item Scalability
                \item Fault tolerance
            \end{itemize}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{Analysis Layer}
    \begin{block}{AI/ML Engine - Phân tích kỹ thuật}
        \begin{itemize}
            \item Lookback period: 90 ngày dữ liệu giá
            \item Chỉ báo: RSI, MACD, Bollinger Bands, Moving Averages
            \item Trend prediction + Risk score (0-100)
            \item MongoDB collection: \texttt{ai\_analysis}
        \end{itemize}
    \end{block}
    
    \begin{block}{LLM Engine - Sentiment Analysis}
        \begin{itemize}
            \item Lookback period: 7 ngày tin tức
            \item OpenAI GPT-3.5-turbo với fallback keyword analysis
            \item Sentiment score (-1 đến +1) + influence score
            \item MongoDB collection: \texttt{llm\_analysis}
        \end{itemize}
    \end{block}
    
    \vspace{0.5em}
    \begin{alertblock}{Kết quả}
        Kết hợp 2 loại phân tích để tạo điểm số tổng hợp
    \end{alertblock}
\end{frame}